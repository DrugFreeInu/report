<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>NOWL REPORT</title>
<style>
html,body{
  margin:0;height:100%;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  background:#000;color:#fff;overflow:hidden;
}

/* input box */
#textInput{
  margin-bottom:15px;font-size:20px;padding:10px 20px;
  border-radius:30px;border:none;outline:none;
  text-align:center;background:#111;color:#ff4f9d;
}

/* run button */
#runBtn{
  font-size:18px;font-weight:700;
  color:#fff;background:#ff4f9d;
  border:none;border-radius:25px;
  padding:10px 30px;margin-bottom:25px;
  cursor:pointer;
  box-shadow:0 0 20px rgba(255,47,137,0.4);
  transition:transform .1s ease,box-shadow .3s ease;
}
#runBtn:active{transform:scale(0.97);}
#runBtn:hover{box-shadow:0 0 30px rgba(255,47,137,0.7);}

/* svg area */
svg{
  width:90%;max-width:700px;
  filter:drop-shadow(0 0 10px rgba(255,47,137,.8))
          drop-shadow(0 0 20px rgba(255,47,137,.4));
}

/* draw animation */
@keyframes draw{
  to{stroke-dashoffset:0;}
}
path{
  fill:none;
  stroke:#ff4f9d;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
  stroke-dasharray:1000;
  stroke-dashoffset:1000;
  animation:draw 1.2s ease forwards;
}

footer{
  position:fixed;bottom:30px;left:50%;transform:translateX(-50%);
  color:#ff6b9d;font-size:14px;opacity:.7;font-weight:600;
}
a{color:#ff6b9d;text-decoration:none;}
</style>
</head>
<body>

<input id="textInput" placeholder="Type text..." value="NOWL REPORT" />
<button id="runBtn">Run</button>
<svg id="output" viewBox="0 0 1000 200"></svg>

<footer>Written with LUHV Â· <a href="write.html">Write new</a></footer>

<!-- opentype.js -->
<script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>
<script>
const svg=document.getElementById("output");
const input=document.getElementById("textInput");
const runBtn=document.getElementById("runBtn");
let fontLoaded=null;

// load Inter font
opentype.load("https://cdn.jsdelivr.net/npm/@fontsource/inter/files/inter-latin-400-normal.woff")
  .then(f=>fontLoaded=f)
  .catch(err=>alert("Font load failed "+err));

function render(txt){
  if(!fontLoaded)return;
  svg.innerHTML="";
  const font=fontLoaded;
  const letters=txt.split("");
  let x=20;const y=120;const size=100;

  letters.forEach((ch,i)=>{
    const p=font.getPath(ch,x,y,size);
    const d=p.toPathData(2);
    const path=document.createElementNS("http://www.w3.org/2000/svg","path");
    path.setAttribute("d",d);
    path.style.animationDelay=`${i*1}s`;
    svg.appendChild(path);
    x+=font.getAdvanceWidth(ch,size)+10;
  });
}

runBtn.addEventListener("click",()=>{
  const txt=input.value.trim()||" ";
  render(txt);
});
</script>

<!-- NOWL REPORT EMBED -->
<iframe id="nowlReportFrame"
  src="report.html"
  style="position:fixed;inset:0;border:none;z-index:9999;display:none;">
</iframe>

<script>
(function(){
  "use strict";
  const frame=document.getElementById('nowlReportFrame');
  function showReport(){
    frame.style.display='block';
    setTimeout(()=>{frame.remove();},15000); // auto close after 15s
  }

  // make callable from anywhere
  window.generateNowlReport=showReport;

  // auto at night
  const hour=new Date().getHours();
  if(hour>=21||hour<6){ setTimeout(showReport,2000); }
})();
</script>

</body>
</html>
