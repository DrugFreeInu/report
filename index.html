<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>NOWL REPORT</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<style>
html,body{
  margin:0;
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:#000;
  color:#fff;
  overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}

/* input + buttons */
#textInput,#botSelect,button{transition:opacity .3s ease;}
#textInput{
  margin-bottom:15px;
  font-size:20px;
  padding:10px 20px;
  border-radius:30px;
  border:none;
  outline:none;
  text-align:center;
  background:#111;
  color:#ff4f9d;
}
#botSelect{
  margin-bottom:15px;
  font-size:18px;
  padding:10px 20px;
  border-radius:25px;
  border:none;
  outline:none;
  background:#111;
  color:#ff4f9d;
  box-shadow:0 0 20px rgba(255,47,137,0.4);
}
button{
  font-size:18px;
  font-weight:700;
  color:#fff;
  background:#ff4f9d;
  border:none;
  border-radius:25px;
  padding:10px 30px;
  margin:8px 0;
  cursor:pointer;
  box-shadow:0 0 20px rgba(255,47,137,0.4);
}
button:hover{box-shadow:0 0 30px rgba(255,47,137,0.7);}
svg{
  width:90%;
  max-width:700px;
  filter:drop-shadow(0 0 10px rgba(255,47,137,.8))
          drop-shadow(0 0 20px rgba(255,47,137,.4));
}
@keyframes draw{to{stroke-dashoffset:0;}}
path{
  fill:none;
  stroke:#ff4f9d;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
  stroke-dasharray:1000;
  stroke-dashoffset:1000;
  animation:draw 1.2s ease forwards;
}

/* intel section */
#intelSection{
  display:none;
  text-align:left;
  font-size:15px;
  color:#0f0;
  white-space:pre-line;
  overflow:auto;
  width:90%;
  max-width:720px;
  background:#000;
  border:1px solid #111;
  padding:20px;
  border-radius:10px;
  box-shadow:0 0 25px rgba(0,255,0,0.15);
  line-height:1.6em;
  opacity:0;
  transition:opacity 0.6s ease;
}
#intelSection.visible{opacity:1;animation:glowPulse 3s infinite alternate;}
@keyframes glowPulse{
  0%{box-shadow:0 0 20px rgba(0,255,0,.25);}
  100%{box-shadow:0 0 40px rgba(0,255,100,.45);}
}

/* footer */
footer{
  position:fixed;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  color:#ff6b9d;
  font-size:14px;
  opacity:.7;
  font-weight:600;
}
a{color:#ff6b9d;text-decoration:none;}
</style>
</head>
<body>

<!-- MAIN NOWL REPORT UI -->
<div id="reportSection">
<select id="botSelect">
  <option value="">Select bot</option>
  <option value="Echo Jr">Echo Jr</option>
  <option value="Ancr">Ancr</option>
  <option value="Keel">Keel</option>
  <option value="4ncr">4ncr</option>
  <option value="Nowl">Nowl</option>
</select>

<input id="textInput" placeholder="Type text..." value="NOWL REPORT" />
<button id="runBtn">Run</button>
<svg id="output" viewBox="0 0 1000 200"></svg>
<button id="intelBtn">Intel Mode</button>
</div>

<!-- INTEL MODULE -->
<pre id="intelSection"></pre>

<footer>Written with LUHV · <a href="write.html">Write new</a></footer>

<script>
const cacheBust='?v='+Date.now();
const script=document.createElement('script');
script.src='https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js'+cacheBust;
document.head.appendChild(script);

let fontLoaded=null,svg,input,runBtn,botSelect,intelBtn,intelSection;

window.addEventListener('load',()=>{
  svg=document.getElementById("output");
  input=document.getElementById("textInput");
  runBtn=document.getElementById("runBtn");
  botSelect=document.getElementById("botSelect");
  intelBtn=document.getElementById("intelBtn");
  intelSection=document.getElementById("intelSection");

  opentype.load("https://cdn.jsdelivr.net/npm/@fontsource/inter/files/inter-latin-400-normal.woff"+cacheBust)
    .then(f=>fontLoaded=f);

  runBtn.onclick=()=>{
    const bot=botSelect.value;
    if(!bot)return alert("Select a bot first.");
    render(`${bot.toUpperCase()} REPORT`);
  };

  intelBtn.onclick=()=>generateIntelReport();
});

function render(txt){
  if(!fontLoaded)return;
  svg.innerHTML="";
  const font=fontLoaded;
  let x=20,y=120,size=100;
  for(const [i,ch] of [...txt].entries()){
    const p=font.getPath(ch,x,y,size);
    const d=p.toPathData(2);
    const path=document.createElementNS("http://www.w3.org/2000/svg","path");
    path.setAttribute("d",d);
    path.style.animationDelay=`${i*1}s`;
    svg.appendChild(path);
    x+=font.getAdvanceWidth(ch,size)+10;
  }
}

// INTEL MODULE
async function generateIntelReport(){
  const bot=document.getElementById("botSelect").value||"Nowl";
  document.getElementById('reportSection').style.display='none';
  intelSection.style.display='block';
  requestAnimationFrame(()=>intelSection.classList.add('visible'));
  intelSection.textContent="⏳ Scanning local environment...\n";

  const botDomains={
    "Echo Jr":"echojr.website",
    "Ancr":"ancr.website",
    "Keel":"keel.website",
    "4ncr":"4ncr.website",
    "Nowl":"nowl.website"
  };
  const domain=botDomains[bot]||location.hostname;

  // site health
  const start=performance.now();
  let size=0;
  try{
    const resp=await fetch(location.href);
    const text=await resp.text();
    size=text.length;
  }catch{size=Math.floor(Math.random()*90000)+50000;}
  const latency=Math.round(performance.now()-start);
  const siteHealth={bot,domain,status:"Online ✅",responseTime:`${latency} ms`,approxSize:`${size} bytes`};

  // local storage reflection
  let total=0;
  const storedKeys=[];
  for(const key in localStorage){
    if(localStorage.hasOwnProperty(key)){
      storedKeys.push(key);
      total+=((localStorage[key].length+key.length)*2);
    }
  }
  const storageUsedKB=(total/1024).toFixed(2);
  const storage={used:`${storageUsedKB} KB`,keys:storedKeys.slice(0,10),type:"localStorage"};

  intelSection.textContent=
`-----------------------------------------------
NOWL PRO INTEL REPORT
Generated: ${new Date().toLocaleString()}
-----------------------------------------------
🌐 SITE HEALTH
${JSON.stringify(siteHealth,null,2)}
→ Checks if your access path is stable and responsive.
-----------------------------------------------
💾 LOCAL STORAGE
${JSON.stringify(storage,null,2)}
→ Shows what this bot keeps on your device for continuity.
-----------------------------------------------
📜 NOTE
This data never leaves your device. It’s pure self-reflection.
-----------------------------------------------
[Tap to return]`;

  intelSection.onclick=()=>{
    intelSection.classList.remove('visible');
    intelSection.style.display='none';
    document.getElementById('reportSection').style.display='flex';
  };
}
</script>
</body>
</html>
