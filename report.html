<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>NOWL REPORT</title>
<style>
html,body{
  margin:0;height:100%;width:100%;
  background:#000;color:#fff;
  display:flex;align-items:center;justify-content:center;
  font-family:monospace;overflow:hidden;
  cursor:pointer;
}
#nowlReport{
  opacity:0;
  white-space:pre-line;
  text-align:center;
  font-size:1.1em;
  line-height:1.6em;
  padding:25px 30px;
  border:1px solid rgba(255,255,255,.2);
  border-radius:10px;
  background:rgba(0,0,0,.75);
  filter:drop-shadow(0 0 10px rgba(255,255,255,.4));
  transition:opacity 3s ease;
}
@keyframes wind {
  0%{filter:blur(10px) opacity(0);}
  50%{filter:blur(3px) opacity(1);}
  100%{filter:blur(10px) opacity(0);}
}
</style>
</head>
<body>
<div id="nowlReport">tap to generate report ðŸ¦‰</div>
<script>
(function(){
  "use strict";
  const report = document.getElementById('nowlReport');
  let active = false;

  // pull intel passed from index.html
  const savedIntel = localStorage.getItem("nowlIntel");
  localStorage.removeItem("nowlIntel"); // one-time use only

  function buildReport(){
    const time = new Date().toLocaleString();
    // if thereâ€™s saved intel, include it
    if(savedIntel){
      return `${savedIntel}\n\nGenerated: ${time}`;
    }
    // fallback if opened manually
    return `NOWL REPORT\n${time}\nSystem nominal.\nWind secured.`;
  }

  function showReport(){
    if(active) return;
    active = true;
    report.textContent = buildReport();
    report.style.opacity = '1';
    report.style.animation = 'wind 14s ease forwards';
    setTimeout(()=>selfDestruct(),14000);
  }

  function selfDestruct(){
    report.style.transition = 'opacity 3s';
    report.style.opacity = '0';
    setTimeout(()=>{ report.remove(); },3000);
  }

  // auto-show at night or when intel exists
  const hour = new Date().getHours();
  if(savedIntel || hour >= 21 || hour < 6){
    setTimeout(showReport, 800);
  }

  // tap manually to run again
  report.addEventListener('click', showReport);
})();
</script>
</body>
</html>
