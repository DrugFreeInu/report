<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>NOWL PRO INTEL REPORT</title>
<style>
html,body{
  margin:0;height:100%;width:100%;
  background:#000;color:#fff;
  font-family:monospace;
  display:flex;align-items:center;justify-content:center;
  overflow:auto;cursor:pointer;
  padding:20px;box-sizing:border-box;
}
#report{
  white-space:pre-line;
  text-align:left;
  font-size:1.05em;
  line-height:1.6em;
  padding:20px 25px;
  border:1px solid rgba(255,255,255,.2);
  border-radius:12px;
  background:rgba(0,0,0,.75);
  box-shadow:0 0 20px rgba(255,255,255,.3);
  max-width:700px;
  transition:opacity 1s ease;
  opacity:0;
}
section{margin-top:1.2em;}
h2{color:#ff4f9d;font-size:1.1em;margin:0 0 .4em;}
hr{border:none;border-top:1px solid rgba(255,255,255,.2);margin:1em 0;}
@keyframes fadein{from{opacity:0;}to{opacity:1;}}
</style>
</head>
<body>
<pre id="report">Initializing NOWL PRO INTEL...</pre>

<script>
(async()=>{
"use strict";
const rep=document.getElementById("report");
const savedIntel=localStorage.getItem("nowlIntel")||"";
localStorage.removeItem("nowlIntel");
const t0=performance.now();

function line(txt){return txt+"\n";}
function hr(){return "--------------------------------------\n";}
function fmt(num,unit=""){return (num!=null?num:"N/A")+unit;}
function fmtSec(ms){return (ms/1000).toFixed(2)+"s";}

let text="";
text+=line(savedIntel.trim());
text+=hr();

// time + uptime
const genTime=new Date();
const up=(performance.now()/1000).toFixed(1);
text+=line("NOWL PRO INTEL REPORT");
text+=line("Generated: "+genTime.toLocaleString());
text+=line("Session Uptime: "+up+"s");
text+=hr();

// PLATFORM
const ua=navigator.userAgent;
text+=line("ðŸ§  SYSTEM");
text+=line("Platform: "+navigator.platform);
text+=line("User Agent: "+ua.split(") ")[0]+")");
text+=line("CPU Cores: "+(navigator.hardwareConcurrency||"Unknown"));
if(performance.memory){
  text+=line("Memory Used: "+(performance.memory.usedJSHeapSize/1048576).toFixed(1)+" MB");
  text+=line("Memory Limit: "+(performance.memory.jsHeapSizeLimit/1048576).toFixed(1)+" MB");
}
text+=line("Screen: "+screen.width+"Ã—"+screen.height+" @"+window.devicePixelRatio+"x");
text+=line("Color Depth: "+screen.colorDepth+"-bit");
text+=line("Language: "+navigator.language);
text+=hr();

// BATTERY
try{
  const b=await navigator.getBattery();
  text+=line("ðŸ”‹ BATTERY");
  text+=line("Level: "+Math.round(b.level*100)+"%");
  text+=line("Charging: "+(b.charging?"Yes âš¡":"No"));
  text+=line("Time to full: "+(b.chargingTime>0?fmtSec(b.chargingTime):"N/A"));
  text+=line("Time to empty: "+(b.dischargingTime>0?fmtSec(b.dischargingTime):"N/A"));
  text+=hr();
}catch(e){text+=line("Battery info unavailable");text+=hr();}

// NETWORK
const conn=navigator.connection||navigator.webkitConnection||navigator.mozConnection;
text+=line("ðŸŒ NETWORK");
text+=line("Online: "+(navigator.onLine?"Yes":"No"));
if(conn){
  text+=line("Type: "+(conn.effectiveType||"Unknown"));
  text+=line("Downlink: "+fmt(conn.downlink," Mbps"));
  text+=line("RTT: "+fmt(conn.rtt," ms"));
}
text+=hr();

// PERFORMANCE
const fps=await new Promise(r=>{
  let frames=0,start=performance.now();
  function loop(){
    frames++;
    if(performance.now()-start<1000) requestAnimationFrame(loop);
    else r(frames);
  }
  loop();
});
const loadTime=performance.now()-t0;
text+=line("ðŸ“Š PERFORMANCE");
text+=line("FPS: "+fps);
text+=line("Page Load: "+fmtSec(loadTime));
text+=line("Idle Time: "+fmtSec(performance.now()-t0-loadTime));
text+=hr();

// STORAGE
if(navigator.storage&&navigator.storage.estimate){
  const est=await navigator.storage.estimate();
  const used=(est.usage/1048576).toFixed(2);
  const quota=(est.quota/1048576).toFixed(2);
  text+=line("ðŸ’¾ STORAGE");
  text+=line("Used: "+used+" MB / "+quota+" MB");
  text+=hr();
}

// PERMISSIONS
if(navigator.permissions){
  const list=["camera","microphone","notifications"];
  text+=line("ðŸ” PERMISSIONS");
  for(const p of list){
    try{
      const st=await navigator.permissions.query({name:p});
      text+=line(p+": "+st.state);
    }catch{}
  }
  text+=hr();
}

// ENVIRONMENT
text+=line("ðŸŒ™ ENVIRONMENT");
text+=line("Orientation: "+(screen.orientation?screen.orientation.type:"Unknown"));
text+=line("Touch Support: "+("ontouchstart" in window?"Yes":"No"));
text+=line("Do Not Track: "+(navigator.doNotTrack=="1"?"Enabled":"No"));
text+=line("PWA Installed: "+(window.matchMedia('(display-mode: standalone)').matches?"Yes":"No"));
text+=hr();

// LATENCY SELF TEST
try{
  const t1=performance.now();
  await fetch(window.location.href,{method:'HEAD',cache:'no-store'});
  const latency=(performance.now()-t1).toFixed(1);
  text+=line("ðŸ“¡ LOCAL LATENCY");
  text+=line("Self ping: "+latency+" ms");
  text+=hr();
}catch{}

// FINALIZE
rep.textContent=text;
rep.style.opacity='1';
})();
</script>
</body>
</html>
