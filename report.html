<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>NOWL REPORT Â· Local Intel</title>
<style>
html,body{
  margin:0;height:100%;width:100%;
  background:#000;color:#fff;
  display:flex;align-items:center;justify-content:center;
  font-family:monospace;overflow:hidden;cursor:pointer;
}
#nowlReport{
  opacity:0;
  white-space:pre-line;
  text-align:center;
  font-size:1.05em;
  line-height:1.7em;
  padding:25px 35px;
  border:1px solid rgba(255,255,255,.2);
  border-radius:10px;
  background:rgba(0,0,0,.85);
  filter:drop-shadow(0 0 15px rgba(255,255,255,.4));
  transition:opacity 2s ease;
}
@keyframes wind {
  0%{filter:blur(0px) opacity(0);}
  10%{filter:blur(0px) opacity(1);}
  90%{filter:blur(0px) opacity(1);}
  100%{filter:blur(12px) opacity(0);}
}
</style>
</head>
<body>
<div id="nowlReport">ðŸ¦‰ Gathering wind data...</div>
<script>
(async function(){
"use strict";
const report=document.getElementById('nowlReport');
let active=false;
const savedIntel=localStorage.getItem("nowlIntel");
localStorage.removeItem("nowlIntel");

// helpers
async function getBattery(){
  try{const b=await navigator.getBattery();return Math.round(b.level*100)+"%";}catch{return "Unknown";}
}
function getConn(){try{return navigator.connection?.effectiveType?.toUpperCase()||"Unknown";}catch{return "Unknown";}}
function getCPU(){return navigator.hardwareConcurrency||"Unknown";}
function getMem(){return navigator.deviceMemory?navigator.deviceMemory+" GB":"Unknown";}
function getPlatform(){return navigator.userAgentData?.platform||navigator.platform||"Unknown";}
function getScreen(){return `${screen.width}Ã—${screen.height} @${window.devicePixelRatio}x`;}
function getColor(){return `${screen.colorDepth}-bit`;}

// FPS test
function measureFPS(ms=1000){
  return new Promise(resolve=>{
    let frames=0, start=performance.now();
    function step(){
      frames++;
      if(performance.now()-start<ms)requestAnimationFrame(step);
      else resolve(Math.round(frames/(ms/1000)));
    }
    requestAnimationFrame(step);
  });
}

// memory usage (Chrome only)
function getHeap(){
  const m=performance.memory;
  if(!m)return "N/A";
  const used=(m.usedJSHeapSize/1048576).toFixed(0);
  const total=(m.jsHeapSizeLimit/1048576).toFixed(0);
  return `${used}MB / ${total}MB`;
}

// idle time
let lastActive=Date.now();
["mousemove","keydown","touchstart","click","scroll"].forEach(e=>{
  addEventListener(e,()=>lastActive=Date.now(),{passive:true});
});
function idleTime(){
  const diff=Math.floor((Date.now()-lastActive)/1000);
  const m=Math.floor(diff/60);const s=diff%60;
  return m>0?`${m}m ${s}s`:`${s}s`;
}

// time since last report
let last=localStorage.getItem("lastReportTime");
const now=Date.now();
let since="First report";
if(last){
  const diff=now-parseInt(last);
  const mins=Math.floor(diff/60000);
  const hrs=Math.floor(mins/60);
  since=hrs>0?`${hrs}h ${mins%60}m ago`:`${mins}m ago`;
}
localStorage.setItem("lastReportTime",now.toString());

// bots
const bots=[
  "Echo Jr: Online â€“ Synced",
  "Ancr: Vault Secure",
  "Keel: Balanced",
  "4ncr: Wallets Active",
  "Nowl: Watching quietly"
];

function computeLUHV(battery,conn,fps){
  let base=80;
  if(conn.includes("5G")||conn.includes("WIFI"))base+=5;
  const b=parseInt(battery)||80;
  if(fps>55)base+=5; else if(fps<30)base-=5;
  base+=Math.min(b/10,10);
  return Math.min(Math.max(base,0),100);
}

async function buildReport(){
  const battery=await getBattery();
  const conn=getConn();
  const cpu=getCPU();
  const mem=getMem();
  const platform=getPlatform();
  const screenRes=getScreen();
  const color=getColor();
  const fps=await measureFPS();
  const heap=getHeap();
  const load=(performance.now()/1000).toFixed(2)+"s";
  const luhv=computeLUHV(battery,conn,fps);
  const hearts="ðŸ’—".repeat(Math.max(1,Math.round(luhv/20)));
  const time=new Date().toLocaleString();

  let intel="";
  if(savedIntel) intel=savedIntel+"\n\n";

  return `${intel}NOWL LOCAL INTEL REPORT
Generated: ${time}

${bots.join("\n")}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âš™ï¸  SYSTEM
Platform: ${platform}
CPU Cores: ${cpu}
Memory: ${mem}
Screen: ${screenRes}
Color Depth: ${color}
Heap: ${heap}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ“Š  PERFORMANCE
FPS: ${fps}
Page Load: ${load}
Idle Time: ${idleTime()}
Last Report: ${since}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸŒ  ENVIRONMENT
Connection: ${conn}
Battery: ${battery}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ’—  LUHV INDEX
${luhv} / 100  ${hearts}`;
}

async function showReport(){
  if(active)return;active=true;
  const txt=await buildReport();
  report.textContent=txt;
  report.style.opacity='1';
  report.style.animation='wind 22s ease forwards';
  setTimeout(()=>selfDestruct(),22000);
}
function selfDestruct(){
  report.style.transition='opacity 2s';
  report.style.opacity='0';
  setTimeout(()=>report.remove(),2500);
}

const hour=new Date().getHours();
if(savedIntel||hour>=21||hour<6){setTimeout(showReport,1000);}
report.addEventListener('click',showReport);
})();
</script>
</body>
</html>
