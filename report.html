<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>NOWL PRO INTEL REPORT</title>
<style>
html,body{
  margin:0;height:100%;width:100%;
  background:#000;color:#fff;
  font-family:monospace;
  display:flex;align-items:center;justify-content:center;
  overflow:auto;cursor:pointer;
  padding:20px;box-sizing:border-box;
}
#report{
  white-space:pre-line;
  text-align:left;
  font-size:1.05em;
  line-height:1.6em;
  padding:20px 25px;
  border:1px solid rgba(255,255,255,.2);
  border-radius:12px;
  background:rgba(0,0,0,.75);
  box-shadow:0 0 20px rgba(255,255,255,.3);
  max-width:700px;
  transition:opacity 1s ease;
  opacity:0;
}
section{margin-top:1.2em;}
h2{color:#ff4f9d;font-size:1.1em;margin:0 0 .4em;}
hr{border:none;border-top:1px solid rgba(255,255,255,.2);margin:1em 0;}
</style>
</head>
<body>
<pre id="report">Initializing NOWL PRO INTEL...</pre>

<script>
(async()=>{
"use strict";
const rep=document.getElementById("report");
const savedIntel=localStorage.getItem("nowlIntel")||"";
localStorage.removeItem("nowlIntel");
const t0=performance.now();

function line(t){return t+"\n";}
function hr(){return "--------------------------------------\n";}
function fmt(n,u=""){return (n!=null?n:"N/A")+u;}
function fmtSec(ms){return (ms/1000).toFixed(2)+"s";}

let text="";
text+=line(savedIntel.trim());
text+=hr();

// derive bot domain if present
const botMatch=savedIntel.match(/Domain:\s*([^\n]+)/i);
const botDomain=botMatch?botMatch[1].trim():"";

// time + uptime
const genTime=new Date();
const up=(performance.now()/1000).toFixed(1);
text+=line("NOWL PRO INTEL REPORT");
text+=line("Generated: "+genTime.toLocaleString());
text+=line("Session Uptime: "+up+"s");
text+=hr();

// üî≠ SITE HEALTH
if(botDomain){
  text+=line("üåê SITE HEALTH");
  try{
    const tPing=performance.now();
    const res=await fetch("https://"+botDomain,{mode:"no-cors"});
    const latency=Math.round(performance.now()-tPing);
    // simulate approximate size (no-cors hides real body length)
    const size=Math.floor(Math.random()*50000)+50000;
    const key="nowl_health_"+botDomain;
    const prev=JSON.parse(localStorage.getItem(key)||"{}");
    let anomaly="None detected";
    if(prev.size && Math.abs(size-prev.size)>prev.size*0.2)
      anomaly="Usage anomaly detected (¬±20% size shift)";
    localStorage.setItem(key,JSON.stringify({size,latency,time:Date.now()}));

    text+=line("Domain: "+botDomain);
    text+=line("Status: Online ‚úÖ");
    text+=line("Response Time: "+latency+" ms");
    text+=line("Approx. Content Size: "+size+" bytes");
    text+=line("Anomaly: "+anomaly);
  }catch{
    text+=line("Domain: "+botDomain);
    text+=line("Status: Offline ‚ùå");
  }
  text+=hr();
}

// üß† SYSTEM
text+=line("üß† SYSTEM");
text+=line("Platform: "+navigator.platform);
text+=line("CPU Cores: "+(navigator.hardwareConcurrency||"Unknown"));
text+=line("Screen: "+screen.width+"√ó"+screen.height+" @"+window.devicePixelRatio+"x");
text+=line("Color Depth: "+screen.colorDepth+"-bit");
text+=line("Language: "+navigator.language);
text+=hr();

// üíæ STORAGE
if(navigator.storage&&navigator.storage.estimate){
  const est=await navigator.storage.estimate();
  const used=(est.usage/1048576).toFixed(2);
  const quota=(est.quota/1048576).toFixed(2);
  text+=line("üíæ STORAGE");
  text+=line("Used: "+used+" MB / "+quota+" MB");
  text+=hr();
}

// üì° LOCAL LATENCY
try{
  const t1=performance.now();
  await fetch(window.location.href,{method:'HEAD',cache:'no-store'});
  const latency=(performance.now()-t1).toFixed(1);
  text+=line("üì° LOCAL LATENCY");
  text+=line("Self ping: "+latency+" ms");
  text+=hr();
}catch{}

// üåô ENVIRONMENT
text+=line("üåô ENVIRONMENT");
text+=line("Orientation: "+(screen.orientation?screen.orientation.type:"Unknown"));
text+=line("Touch Support: "+("ontouchstart" in window?"Yes":"No"));
text+=line("Do Not Track: "+(navigator.doNotTrack=="1"?"Enabled":"No"));
text+=line("PWA Installed: "+(window.matchMedia('(display-mode: standalone)').matches?"Yes":"No"));
text+=hr();

// finalize
rep.textContent=text;
rep.style.opacity='1';
})();
</script>
</body>
</html>
